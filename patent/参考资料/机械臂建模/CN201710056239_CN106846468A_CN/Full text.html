<html><head><title>全文文本(Fulltext)</title><meta http-equiv='Content-Type' content='text/html; charset=UTF-8'><style>div.fullText table {width: 100%;text-indent: 1px;} 
 div.fullText table td.header {font-weight: bold;text-align: center;font-family: '宋体';font-size: 16px;line-height:20px;color: #000000;padding: 5px;}div.fullText table td.content {padding: 1px;text-align: left;vertical-align: top;width: 100%;font-family: '宋体';font-size: 14px;line-height:20px;color: #000000;}</style></head><body><?xml version="1.0" encoding="UTF-8"?><div xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:siposeas="java:com.neusoft.sipo.sipopublicsearch.search.app.view.detailUtils.xsltParser.XsltSeasParser" xmlns:str="http://example.com/namespace" xmlns:business="http://www.sipo.gov.cn/XMLSchema/business" xmlns:base="http://www.sipo.gov.cn/XMLSchema/base" class="fullText"><table><tr><td id="claim_title" class="header">权利要求书</td></tr><tr><td class="content" id="claim_1">1.一种基于ROS系统的机械臂快速建模及运动规划实现方法，其特征在于，包括以下步骤：</td></tr><tr><td class="content" id="claim_2">步骤1：绘制机械臂各个零部件三维模型；</td></tr><tr><td class="content" id="claim_3">步骤2：创建和保存机械臂各个零部件三维模型的坐标系；</td></tr><tr><td class="content" id="claim_4">步骤3：编写基于XML的机械臂描述文件；</td></tr><tr><td class="content" id="claim_5">步骤4：解算基于ROS系统的机械臂运动规划；</td></tr><tr><td class="content" id="claim_6">步骤5：实现系统通信及机械臂运动控制。</td></tr><tr><td class="content" id="claim_7">2.根据权利要求1所述的基于ROS系统的机械臂快速建模及运动规划实现方法，其特征在于，所述步骤2中，按照一定的规则创建各个零部件的坐标系；</td></tr><tr><td class="content" id="claim_8">所述坐标系创建规则如下：</td></tr><tr><td class="content" id="claim_9">21.所创建的坐标系为右手笛卡尔坐标系；</td></tr><tr><td class="content" id="claim_10">22.坐标系的原点选择位于零部件底部所在的平面之内；</td></tr><tr><td class="content" id="claim_11">23.坐标系原点选择在三维模型的对称中心位置；</td></tr><tr><td class="content" id="claim_12">24.所设置的坐标系原点必须可定位，即可以计算出坐标系原点距离三维模型外边界的距离。</td></tr><tr><td class="content" id="claim_13">3.根据权利要求2所述的基于ROS系统的机械臂快速建模及运动规划实现方法，其特征在于，所述步骤2中创建各个零部件的坐标系的过程如下：</td></tr><tr><td class="content" id="claim_14">首先选取需要创建坐标系的零件模型的某一个外轮廓所在的平面作为底部平面；</td></tr><tr><td class="content" id="claim_15">然后将该平面作为坐标系创建的基准平面，然后在该平面上创建坐标系的原点，该原点的位置设置在零件的对称平面或中心转轴上；</td></tr><tr><td class="content" id="claim_16">最后，需要创建的坐标系Z轴的方向为垂直向上，X轴的方向为沿着“屏幕”向内，Y轴指向左侧，分别于X轴、Z轴垂直，至此零件的参考坐标系创建完成。</td></tr><tr><td class="content" id="claim_17">4.根据权利要求1所述的基于ROS系统的机械臂快速建模及运动规划实现方法，其特征在于，所述步骤1和步骤2中，机械臂零部件三维模型的绘图环境包括Solidworks、UG、Creo、CATIA、Pro/E、CAD，最终保存文件的格式为STL文件。</td></tr><tr><td class="content" id="claim_18">5.根据权利要求1所述的基于ROS系统的机械臂快速建模及运动规划实现方法，其特征在于，所述步骤3中，利用已经保存的模型文件快速创建机械臂的描述文件，具体步骤如下：</td></tr><tr><td class="content" id="claim_19">31：声明xml版本及机械臂名称；</td></tr><tr><td class="content" id="claim_20">32：利用RGBA格式创建零部件模型的颜色信息并声明其他常量；</td></tr><tr><td class="content" id="claim_21">33：编写机械臂传动部分宏定义；</td></tr><tr><td class="content" id="claim_22">34：引用已经保存的模型文件及所创建坐标系的具体位置信息，创建机械臂的关节和连杆，同时包含碰撞检测模型；</td></tr><tr><td class="content" id="claim_23">35：关节传动属性确定并保存机械臂描述文件。</td></tr><tr><td class="content" id="claim_24">6.根据权利要求1所述的基于ROS系统的机械臂快速建模及运动规划实现方法，其特征在于，所述步骤4中，机械臂运动规划解算的具体实施步骤为：</td></tr><tr><td class="content" id="claim_25">41：利用已经保存的机械臂描述文件及ROS系统中的moveit设置助手工具生成机械臂的运动初始化软件包；</td></tr><tr><td class="content" id="claim_26">42：编写机械臂需求位置程序并生成相应的运动信息序列。</td></tr><tr><td class="content" id="claim_27">7.根据权利要求1所述的基于ROS系统的机械臂快速建模及运动规划实现方法，其特征在于，所述步骤5中，编写基于ROS的通信控制程序模块，将规划出的运动轨迹发送至机械臂的运动控制模块并读取机械臂的实时位姿；机械臂接收到运动信息序列并驱动机械臂的执行单元按照其包含的运动信息做出运动并实时采集机械臂的运动信息发送至通信控制程序。</td></tr></table></div><div xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:siposeas="java:com.neusoft.sipo.sipopublicsearch.search.app.view.detailUtils.xsltParser.XsltSeasParser" xmlns:str="http://example.com/namespace" xmlns:business="http://www.sipo.gov.cn/XMLSchema/business" xmlns:base="http://www.sipo.gov.cn/XMLSchema/base" class="fullText"><table style="table-layout:fixed"><tr><td id="description_title" class="header">
						说明书
					</td></tr><tr><td class="content" id="description_invention_title">一种基于ROS系统的机械臂建模及运动规划实现方法</td></tr><tr><td class="content" id="description_1"/></tr><tr><td class="content" id="description_2">技术领域</td></tr><tr><td class="content" id="description_3">本发明属于机械臂控制和运动规划领域，特别是一种基于ROS系统的机械臂快速建模及运动规划实现方法。</td></tr><tr><td class="content" id="description_4">背景技术</td></tr><tr><td class="content" id="description_5">随着机器人技术的发展，无论是工业机器人还是服务型机器人都在各个领域得到了广泛的利用，同时也引起了持续的机器人研究热潮。其中机器人操作系统在机器人大发展中起到至关重要的作用。所谓机器人操作系统实质上是为机器人标准化设计而构造的软件平台，它使得每一位机器人设计师都可以使用同样的平台来进行机器人软件开发。一般来说机器人操作系统主要包括硬件抽象、底层设备控制、常用功能实现、进程间消息以及数据包管理等功能。目前比较常见的机器人操作系统有安卓（Android）系统、Linux（Ubuntu、Debian等）系统、ROS系统、以及一些嵌入式的操作系统（如uCOSIII等）。其中ROS系统具有以下几个特点：</td></tr><tr><td class="content" id="description_6">1.分布式计算。</td></tr><tr><td class="content" id="description_7">2.程序复用。</td></tr><tr><td class="content" id="description_8">3.快速的调试和测试。</td></tr><tr><td class="content" id="description_9">这些特点都是快速开发机器人所需要的，因此ROS系统的用户在最近一直呈上升趋势。而如何在ROS系统中准确地建立机器人模型并实现相关的运动控制也成为研究的热点。目前，在ROS中建立机器人模型主要方法如下：</td></tr><tr><td class="content" id="description_10">1.采用ROS系统提供的urdf描述句柄创建机器人模型。</td></tr><tr><td class="content" id="description_11">2.采用编写的免费的sw2urdf插件，将Solidworks文件转换成urdf机器人模型。</td></tr><tr><td class="content" id="description_12">其中第一种方法由于其提供的描述句柄有较多的限制，仅仅可以绘制矩形、圆柱等较为规则的三维模型，对相对简单的机器人系统进行建模尚可，如果机械臂模型复杂，零件又包含各种曲面，这种方法则比较困难，甚至会造成模型失真；第二种方法利用专用的插件将机器人模型进行导出，但是仅仅限制在Solidworks绘图环境中，而且该插件由于是个人编写，缺少维护和验证，在各个版本的Solidworks中兼容性并不好。</td></tr><tr><td class="content" id="description_13">在此基础上ROS系统的建模开放了对STL文件和DAE文件的建模支持，本发明就是在此基础上提出了一种基于STL文件模型的坐标系创建规则及方法和描述文件编写框架，在此基础上就可以快速的对机械臂进行建模，结合后面提出的运动规划配制方法可以快速准确地实现机械臂的运动规划和控制。</td></tr><tr><td class="content" id="description_14">在机械臂运动规划领域有很多成熟的算法，总体来说分为关节空间规划方法、笛卡尔空间规划方法、样条函数轨迹规划等。其中关节空间规划方法又分为三次多项式轨迹规划、五次多项式轨迹规划、抛物线过渡插值规划等；笛卡尔空间规划方法则包含直线轨迹规划、圆弧轨迹规划等。如此多样的轨迹规划算法在机械臂控制系统中快速配置和效果验证往往比较复杂，本发明在此基础上根据ROS系统支持的MoveIt插件提出了一种快速配置的方法，结合本发明提出的机械臂快速建模方法可以快速实现在机械臂上对各种算法进行配置和验证。</td></tr><tr><td class="content" id="description_15">发明内容</td></tr><tr><td class="content" id="description_16">针对现有技术存在的缺陷或不足，本发明旨在于提出一种基于ROS系统的机械臂快速建模及运动规划实现方法。首先可以解决在ROS系统中的传统方法对机械臂建模过程中的对模型限制条件多、模型失真、插件兼容性不好、绘图环境限制等缺陷；其次通过本发明提出的MoveIt接口程序模块、MoveIt配置方法和通信控制程序模块等，结合本发明提出的建模方法，可以实现机械臂运动规划的快速配置，既可以使用已有的机械臂运动规划算法，又可以快速验证用户编写的运控算法的优劣。</td></tr><tr><td class="content" id="description_17">实现本发明目的的技术解决方案为：</td></tr><tr><td class="content" id="description_18">一种基于ROS系统的机械臂快速建模及运动规划实现方法，包括以下步骤：</td></tr><tr><td class="content" id="description_19">步骤1：绘制机械臂各个零部件的三维模型；</td></tr><tr><td class="content" id="description_20">步骤2：创建和保存机械臂各个零部件三维模型的坐标系；</td></tr><tr><td class="content" id="description_21">步骤3：编写基于XML的机械臂描述文件；</td></tr><tr><td class="content" id="description_22">步骤4：解算基于ROS系统的机械臂运动规划；</td></tr><tr><td class="content" id="description_23">步骤5：实现系统通信及实现机械臂运动控制。</td></tr><tr><td class="content" id="description_24">进一步的，所述步骤2中，按照一定的规则创建各个零部件的坐标系，然后将文件保存为STL格式，保存时设置其单位为米（m）。</td></tr><tr><td class="content" id="description_25">上述坐标系创建规则如下：</td></tr><tr><td class="content" id="description_26">21.所创建的坐标系为右手笛卡尔坐标系；</td></tr><tr><td class="content" id="description_27">22. 坐标系的原点优先选择位于零部件底部所在的平面之内；</td></tr><tr><td class="content" id="description_28">23. 坐标系原点优先选择在三维模型的对称中心位置；</td></tr><tr><td class="content" id="description_29">24. 所设置的坐标系原点必须可定位，即可以计算出坐标系原点距离三维模型外边界的距离。</td></tr><tr><td class="content" id="description_30">更进一步，所述步骤2中创建各个零部件的坐标系的过程如下：</td></tr><tr><td class="content" id="description_31">首先选取需要创建坐标系的零件模型的某一个外轮廓所在的平面作为底部平面；</td></tr><tr><td class="content" id="description_32">然后将该平面作为坐标系创建的基准平面，然后在该平面上创建坐标系的原点，该原点的位置设置在零件的对称平面或中心转轴上；</td></tr><tr><td class="content" id="description_33">最后，需要创建的坐标系Z轴的方向为垂直向上，X轴的方向为沿着“屏幕”向内，Y轴指向左侧，分别于X轴、Z轴垂直，至此零件的参考坐标系创建完成。</td></tr><tr><td class="content" id="description_34">需要说明的是，这一过程不依赖于固定的模型绘制环境，所述步骤1和步骤2中，机械臂零部件三维模型的绘图环境包括Solidworks、UG、Creo、CATIA在内的所有绘图软件，最终保存文件的格式为STL文件，也可以选择DAE格式；同时文件保存成STL格式的时候，模型特征不会被淹没，因此在建模的时候模型不会失真。</td></tr><tr><td class="content" id="description_35">进一步的，所述步骤3中将保存的模型文件按照本发明提出的编程框架编写基于XML的模型描述文件。</td></tr><tr><td class="content" id="description_36">本发明提出的模型描述的编程框架涵盖了ROS系统建模过程中需要的一些基本配置，本框架主要包含以下几个部分：</td></tr><tr><td class="content" id="description_37">31. xml版本说明及机械臂名称声明；</td></tr><tr><td class="content" id="description_38">32. 利用RGBA格式创建零部件模型的颜色信息并声明其他常量；</td></tr><tr><td class="content" id="description_39">33. 编写机械臂传动部分宏定义；</td></tr><tr><td class="content" id="description_40">34. 引用已经保存的模型文件（STL格式）及所创建坐标系的具体位置信息，创建机械臂的关节（joint）和连杆（link），同时包含碰撞检测模型；</td></tr><tr><td class="content" id="description_41">35. 关节传动属性确定并保存机械臂描述文件，文件格式选择为xacro格式。</td></tr><tr><td class="content" id="description_42">以上各步骤可以在编写时根据具体情况对顺序进行重新调整。</td></tr><tr><td class="content" id="description_43">进一步的，所述步骤4解算基于ROS系统的机械臂运动规划包括编写MoveIt接口程序模块，并配置MoveIt运动规划算法库及其附属环境。具体过程包括：</td></tr><tr><td class="content" id="description_44">41.调用MoveIt 初始化工具包（MoveIt Setup Assistant Tool），将步骤3中创建的描述文件作为其输入文件，配置生成MoveIt初始化程序模块。如果不做修改本初始化程序包默认采用的运动规划算法库为OMPL。</td></tr><tr><td class="content" id="description_45">42. 编写MoveIt接口程序模块。接口程序模块的作用是将用户预定义的工作空间点或者将传感器检测到的空间点传送至上一步配置生成的MoveIt初始化程序包，进行运动规划并产生相应的运动消息队列。</td></tr><tr><td class="content" id="description_46">本发明提出的MoveIt接口程序模块采用C++编写，该模块给出了机械臂的工作空间内的若干个目标点位置，目标点可以为用户指定的目标列表，也可以由位置传感器探测而来。这些目标点以四元数的方式给出并传递到MoveIt初始化程序模块，应用指定的运动规划算法可以对机械臂进行运动规划并给出机械臂各个关节的运动信息序列。</td></tr><tr><td class="content" id="description_47">步骤5包括：编写基于ROS的通信控制程序模块，将规划出的运动轨迹发送至机械臂的运动控制模块并读取机械臂的实时位姿；机械臂接收到运动信息序列并驱动机械臂的执行单元按照其包含的运动信息做出运动并实时采集机械臂的运动信息发送至通信控制程序。</td></tr><tr><td class="content" id="description_48">本发明提出的基于ROS的通信控制模块支持基于USB转接的或直连的CAN通信和USART通信两种。本模块的作用主要有两个：</td></tr><tr><td class="content" id="description_49">1. 将运动规划算法给出的机械臂各个关节的运动信息序列按照队列的方式发送给机械臂的运动控制模块。</td></tr><tr><td class="content" id="description_50">2. 读取运动控制模块返回的各个关节的实际运动位姿信息，并发布给MoveIt初始化程序模块用于下一个动作的运动规划起点。</td></tr><tr><td class="content" id="description_51">本发明的基于ROS系统的机械臂快速建模及运动规划实现方法与现有技术相比，其显著优点在于：本发明的机器人建模技术方案可以快速的对机械臂进行模型建立，充分利用ROS系统的优势的同时对机械臂模型的绘制环境要求小，适应性强，应用前景广泛。本发明提出的模型描述文件编程框架可以用于绝大部分机械臂甚至机器人的描述编程，简单实用。本发明提出的MoveIt接口程序模块可以实现和MoveIt初始化程序模块无缝衔接，且理论上对机械臂的目标点数量无限定。本发明提出的基于ROS的通信控制程序模块可以适用于大部分的机械臂通信和控制，适应性强，通信过程稳定可靠，应用范围广。总之，本发明提出的整体解决方案可以在ROS系统下对机械臂的运动规划进行快速开发和验证，既可以用于科研中的算法验证，也可以用于实际生产中的机械臂控制。</td></tr><tr><td class="content" id="description_52">附图说明</td></tr><tr><td class="content" id="description_53">图1为本发明提出的一种基于ROS系统的机械臂快速建模及运动规划实现方法的整体步骤；</td></tr><tr><td class="content" id="description_54">图2为本发明提出的一种机械臂三维零件模型坐标系的创建原则及方法的示例说明；</td></tr><tr><td class="content" id="description_55">图3为本发明提出的一种基于ROS系统的机械臂建模中模型描述的编程框架流程图；。</td></tr><tr><td class="content" id="description_56">图4为本发明提出的基于ROS系统的MoveIt接口程序模块的编程框图；</td></tr><tr><td class="content" id="description_57">图5为本发明提出的基于ROS系统的通信控制程序模块的编程框图。</td></tr><tr><td class="content" id="description_58">具体实施方式</td></tr><tr><td class="content" id="description_59">如图1所示，为本发明提出的一种基于ROS系统的机械臂快速建模及运动规划实现方法的整体实现流程，其中实现过程分为三个部分：机械臂模型建立、机械臂运动规划和机械臂运动控制。</td></tr><tr><td class="content" id="description_60">参考图1所示的实现流程，本方法具体又包括以下步骤：</td></tr><tr><td class="content" id="description_61">步骤1：机械臂三维模型的绘制，这个绘制过程不限定模型绘制环境，即可以为包括Solidworks、UG、Creo、CATIA等在内的所有绘图软件。三维模型可以表现出机械臂的具体尺寸和外观细节。</td></tr><tr><td class="content" id="description_62">步骤2：三维模型坐标系的创建和文件的模型文件的保存。其中，坐标系的创建过程是在另存或者导出模型之前进行的，且坐标系创建遵循本发明提出的创建方法。此外文件在另存或导出时设置其默认尺寸的主单位为米（m），以便和ROS系统中的默认主单位保持一致。</td></tr><tr><td class="content" id="description_63">步骤3：根据ROS系统支持的模型描述句柄，通过引用上一步骤中保存的STL模型文件，创建机械臂模型的描述文件，本发明提出了一种ROS系统良好支持的机械臂模型描述文件编程框架，编程后保存的文件格式为xacro格式。需要说明的是，在本发明中，将所有STL模型文件替换为采用DAE格式文件，也可实现发明目的。然后配置ROS系统中的RViz对已经编写完成的模型在可视环境内进行验证，可以单独驱动机械臂的每个关节验证其运动方式和运动范围是否符合预期。</td></tr><tr><td class="content" id="description_64">步骤4：ROS系统的MoveIt程序模块配置以及MoveIt接口程序模块引入。本步骤的具体实施过程如下所述：</td></tr><tr><td class="content" id="description_65">41. 调用MoveIt 初始化工具包（MoveIt Setup Assistant Tool），将步骤3中创建的描述文件作为其输入文件，配置生成MoveIt初始化程序模块。如果不做修改本初始化程序包默认采用的运动规划算法库为OMPL。</td></tr><tr><td class="content" id="description_66">42. 编写MoveIt接口程序模块。接口程序模块的作用是将用户预定义的工作空间点或者将传感器检测到的空间点传送至上一步配置生成的MoveIt初始化程序包，进行运动规划并产生相应的运动消息队列。</td></tr><tr><td class="content" id="description_67">步骤5：编写ROS系统机械臂通信控制程序模块。机械臂通信控制模块是连接ROS系统和机械臂运动控制模块的桥梁。首先该程序模块将MoveIt初始化程序包产生的运动消息队列发送至机械臂运动控制模块使其执行相关动作，然后该程序模块接收机械臂各关节实际位姿信息并返回给MoveIt初始化程序包用于下一组动作规划。</td></tr><tr><td class="content" id="description_68">步骤51：连接机械臂运动控制驱动模块相应的通信物理接口，接收ROS系统机械臂通信控制程序发送的控制消息队列，驱动机械臂各个关节按照预定运动消息产生运动。</td></tr><tr><td class="content" id="description_69">至此已经完成了整个机械臂的建模和运动规划的环境配置。</td></tr><tr><td class="content" id="description_70">如图2所示，本发明提出的一种机械臂三维零件模型坐标系的创建原则及方法，本图提供了该方法的的示例说明。</td></tr><tr><td class="content" id="description_71">首先，图2所示的零件模型仅为说明该方法所用，具体建模时可以参考该方法。建模的过程如下：</td></tr><tr><td class="content" id="description_72">首先选取需要创建坐标系的零件模型的某一个外轮廓所在的平面作为底部平面，本零件选取的底部平面为β。</td></tr><tr><td class="content" id="description_73">然后将该平面作为坐标系创建的基准平面，然后在该平面上创建坐标系的原点：O，该原点的位置优先设置在零件的对称平面或中心转轴上。对于本示例，原点距离零件外轮廓的距离可以计算出分别为a/2和b/2，这些参数在后续的建模中将用到。</td></tr><tr><td class="content" id="description_74">最后，需要创建的坐标系为右手笛卡尔坐标系，Z轴的方向为垂直向上，X轴的方向为沿着“屏幕”向内，Y轴指向左侧，分别于X轴、Z轴垂直。至此零件的参考坐标系创建完成。</td></tr><tr><td class="content" id="description_75">图3所示为本发明提出的一种基于ROS系统的机械臂建模中模型描述的编程框架流程图。所谓模型描述是ROS系统支持的一种基于XML脚本语言的建模方法。本发明提出的编程框架由声明和定义，关节定义两个部分组成。</td></tr><tr><td class="content" id="description_76">其中，声明和定义又包含声明XML版本和机械臂名称、声明颜色信息、声明程序用常量、关节传动参数宏定义等。</td></tr><tr><td class="content" id="description_77">颜色信息声明的形式为（以黑色为例）：</td></tr><tr><td class="content" id="description_78">  &lt;material name="Black"&gt;</td></tr><tr><td class="content" id="description_79">    &lt;color rgba="0.0 0.0 0.0 1.0"/&gt;</td></tr><tr><td class="content" id="description_80">  &lt;/material&gt;</td></tr><tr><td class="content" id="description_81">传动参数宏定义形式为：</td></tr><tr><td class="content" id="description_82">  &lt;xacro:macro name="transmission_block" params="joint_name"&gt;</td></tr><tr><td class="content" id="description_83">     &lt;transmission name="tran1"&gt;</td></tr><tr><td class="content" id="description_84">       &lt;type&gt;transmission_interface/SimpleTransmission&lt;/type&gt;</td></tr><tr><td class="content" id="description_85">       &lt;joint name="${joint_name}"&gt;</td></tr><tr><td class="content" id="description_86">        &lt;hardwareInterface&gt;PositionJointInterface&lt;/hardwareInterface&gt;</td></tr><tr><td class="content" id="description_87">       &lt;/joint&gt;</td></tr><tr><td class="content" id="description_88">       &lt;actuator name="motor1"&gt;</td></tr><tr><td class="content" id="description_89">        &lt;hardwareInterface&gt;PositionJointInterface&lt;/hardwareInterface&gt;</td></tr><tr><td class="content" id="description_90">        &lt;mechanicalReduction&gt;1&lt;/mechanicalReduction&gt;</td></tr><tr><td class="content" id="description_91">       &lt;/actuator&gt;</td></tr><tr><td class="content" id="description_92">     &lt;/transmission&gt;</td></tr><tr><td class="content" id="description_93">  &lt;/xacro:macro&gt;</td></tr><tr><td class="content" id="description_94">关节定义是本程序框架的核心部分，这一部分指定了机械臂各关节的运动类型、运动范围、传动参数、以及碰撞检测等，下面为举例说明：</td></tr><tr><td class="content" id="description_95">机械臂关节（Joint）定义模块为：</td></tr><tr><td class="content" id="description_96">&lt;joint name="_NAME" type="_TYPE"&gt;</td></tr><tr><td class="content" id="description_97">    &lt;parent link="_LINK1 "/&gt;</td></tr><tr><td class="content" id="description_98">    &lt;child link="_LINK2"/&gt;</td></tr><tr><td class="content" id="description_99">    &lt;origin xyz="_X _Y _Z" rpy="_R _P _Y" /&gt;</td></tr><tr><td class="content" id="description_100">    &lt;axis xyz="_ 1 0" /&gt;</td></tr><tr><td class="content" id="description_101">    &lt;limit effort="_E" velocity="_V" lower="_L" upper="_U"/&gt;</td></tr><tr><td class="content" id="description_102">    &lt;dynamics damping="_D" friction="_F"/&gt;</td></tr><tr><td class="content" id="description_103">  &lt;/joint&gt;</td></tr><tr><td class="content" id="description_104">其中所列出的下划线（_）加大写字母或单词（如_A、_LINK等）为需要根据实际的机械臂关节情况确定的参数。</td></tr><tr><td class="content" id="description_105">机械臂连接（Link）的定义方式为：</td></tr><tr><td class="content" id="description_106">&lt;link name="_LINK_NAME"&gt;</td></tr><tr><td class="content" id="description_107">&lt;visual&gt;</td></tr><tr><td class="content" id="description_108">    &lt;origin xyz="_X _Y _Z" rpy="_R _P _Y" /&gt;</td></tr><tr><td class="content" id="description_109">    &lt;geometry&gt;</td></tr><tr><td class="content" id="description_110">        &lt;mesh filename="package://.. /../_NAME.STL"/&gt;</td></tr><tr><td class="content" id="description_111">    &lt;/geometry&gt;</td></tr><tr><td class="content" id="description_112">    &lt;material name="black" /&gt;</td></tr><tr><td class="content" id="description_113">&lt;/visual&gt;</td></tr><tr><td class="content" id="description_114">    &lt;collision&gt;</td></tr><tr><td class="content" id="description_115">    &lt;origin xyz="_X _Y _Z" rpy="_R _P _Y" /&gt;</td></tr><tr><td class="content" id="description_116">    &lt;geometry&gt;</td></tr><tr><td class="content" id="description_117">        &lt;mesh filename="package://.. /../_NAME.STL"/&gt;</td></tr><tr><td class="content" id="description_118">    &lt;/geometry&gt;</td></tr><tr><td class="content" id="description_119">&lt;/collision&gt;</td></tr><tr><td class="content" id="description_120">    &lt;xacro:inertial_matrix mass="_M"/&gt;</td></tr><tr><td class="content" id="description_121">&lt;/link&gt;</td></tr><tr><td class="content" id="description_122">其中所列出的下划线（_）加大写字母或单词（如_A、_LINK等）为需要根据实际的机械臂关节情况确定的参数。这一步将引用按照图2所说明的包含参考坐标系信息的机械臂零件模型文件（STL文件）且引入了碰撞检测模型。</td></tr><tr><td class="content" id="description_123">图4所示为本发明提出的基于ROS系统的MoveIt接口程序模块的编程框图。</td></tr><tr><td class="content" id="description_124">本模块的作用是给出了机械臂的工作空间内的若干个目标点位置，目标点可以为用户指定的目标列表，也可以由位置传感器探测而来。这些目标点以四元数的方式给出并传递到MoveIt初始化程序模块，应用指定的运动规划算法可以对机械臂进行运动规划并给出机械臂各个关节的运动信息序列。</td></tr><tr><td class="content" id="description_125">具体来说模块主要流程为：确定目标点来源、数据转换（目标点数据为格式化为四元数形式）、开启ROS节点线程、调用MoveIt的C++ API指定机械臂模型规划群组、将目标点推送至MoveIt初始化程序模块等。</td></tr><tr><td class="content" id="description_126">总之，本模块给出了机械臂运动规划的起点和目标点。</td></tr><tr><td class="content" id="description_127">图5所示为本发明提出的基于ROS系统的通信控制程序模块的编程框图。</td></tr><tr><td class="content" id="description_128">本发明提出的基于ROS的通信控制模块支持基于USB转接的或直连的CAN通信和USART通信两种。本模块的作用主要有两个：</td></tr><tr><td class="content" id="description_129">1. 将运动规划算法给出的机械臂各个关节的运动信息序列按照队列的方式发送给机械臂的运动控制模块。</td></tr><tr><td class="content" id="description_130">2. 读取运动控制模块返回的各个关节的实际运动位姿信息，并发布给MoveIt初始化程序模块用于下一个动作的运动规划起点。</td></tr><tr><td class="content" id="description_131">如图5所示，该模块的处理过程为：首先初始化ROS节点信息，定义消息服务器程序及其回调函数；其次将接受的数据处理成为消息队列并保存在迭代器中等待发送；然后选择当前机械臂支持的通信方式，按照通信方式初始化通信参数并将数据发送给机械臂控制模块；最后按照机械臂控制模块支持的通信方式取回机械臂运动的实际位姿并发布给MoveIt初始化程序模块。</td></tr><tr><td class="content" id="description_132">综上所述，本发明与现有技术相比，其显著优点在于：本发明的机器人建模技术方案可以快速的对机械臂进行模型建立，充分利用ROS系统的优势的同时对机械臂模型的绘制环境要求小，适应性强，应用前景广泛。本发明提出的模型描述文件编程框架可以用于绝大部分机械臂甚至机器人的描述编程，简单实用。本发明提出的MoveIt接口程序模块可以实现和MoveIt初始化程序模块无缝衔接，且理论上对机械臂的目标点数量无限定。本发明提出的基于ROS的通信控制程序模块可以适用于大部分的机械臂通信和控制，适应性强，通信过程稳定可靠，应用范围广。</td></tr><tr><td class="content" id="description_133">虽然本发明已以较佳实施例揭露如上，然其并非用以限定本发明。本发明所属技术领域中具有通常知识者，在不脱离本发明的精神和范围内，当可作各种的更动与润饰。因此，本发明的保护范围当视权利要求书所界定者为准。</td></tr></table></div></body></html>